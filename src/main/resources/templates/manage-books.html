
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="https://www.thymeleaf.org">


<!-- Mirrored from themes.getappui.com/techzaa/velonic/layouts/auth-login.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 10 May 2024 11:14:42 GMT -->
<head>
<meta charset="utf-8" />
<title>Books</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta
	content="A fully responsive admin theme which can be used to build CRM, CMS,ERP etc."
	name="description" />
<meta content="Techzaa" name="author" />

<!-- CSS -->
<link th:href="@{/CSS/adminlte.min.css}" rel="stylesheet"
	type="text/css" id="app-style">
<link th:href="@{/CSS/app.min.css}" rel="stylesheet" type="text/css"
	id="app-style">
<link rel="shortcut icon" th:href="@{/CSS/icons.min.css}"
	type="text/css" id="app-style">

<!-- Font Awesome -->
<link rel="stylesheet"
	th:href="@{/plugins/fontawesome-free/css/all.min.css}">

<!-- Google Fonts -->
<link
	href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet">
<!-- Select2 -->
<link rel="stylesheet" th:href="@{/plugins/select2/css/select2.min.css}">
<link rel="stylesheet"
	th:href="@{/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css}">
<!-- Sweet Alerts -->
<link rel="stylesheet"
	th:href="@{/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css}">
<!-- Toastr -->
<link rel="stylesheet" th:href="@{/plugins/toastr/toastr.min.css}">
<!-- Data tables Buttons -->
<link rel="stylesheet"
	th:href="@{/plugins/datatables-buttons/css/buttons.bootstrap4.min.css}">
<!-- daterange picker -->
<link rel="stylesheet"
	th:href="@{/plugins/daterangepicker/daterangepicker.css}">
<!-- DataTables -->
<link rel="stylesheet"
	th:href="@{/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css}">
<link rel="stylesheet"
	th:href="@{/plugins/datatables-responsive/css/responsive.bootstrap4.min.css}">
<!-- Full Calendar -->
<link rel="stylesheet"
	th:href="@{/plugins/fullcalendar/lib/main.min.css}">
<script th:src="@{/plugins/fullcalendar/lib/main.min.js}"></script>

<link th:href="httpsjquery.ui.datepicker.monthyearpicker.css"
	rel="stylesheet">
<script th:src="jquery.ui.datepicker.monthyearpicker.js"></script>

<style>
@keyframes fade-in{
0%{opacity: 1}
100%{opacity: 0}
}

.fade-in-element{
animation: fade-in 5s ease;
}
</style>
</head>
<body class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper">
		<nav
			class="main-header navbar navbar-expand"
			style="height: 60px;background-color: #124491;">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" data-widget="pushmenu"
					href="#"><i class="fas fa-bars" style="color:aliceblue"></i></a></li>
				<li class="nav-item d-none d-sm-inline-block"><a
					th:href="@{/home}" class="nav-link" style="color:aliceblue">Home</a></li>
			</ul>

			<!-- Right navbar links -->
			<ul class="navbar-nav ml-auto">

				<li class="nav-item dropdown">
					<div class="dropdown ">
						<a href="javascript:void(0)" class="chip ml-3 nav-link"
							data-toggle="dropdown"
							style="display: flex; align-items: center;"> <span
							class="account-user-avatar"> <i class="nav-icon"> <img
									th:src="@{/Images/no-profile.png}"
									style="width: 40px; height: 40px;border-radius:50%" alt="" srcset="">
							</i>
						</span> <span th:text="${userdata.fullname}"
							style="color: gold; font-weight: bold; margin-left: 8px;">
						</span></a>
						<div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
							<a class="dropdown-item" href="page-profile.html"> <i
								class="dropdown-icon fe fe-user"> <img
									th:src="@{/Images/icons8-male-user-50.png}" alt=""
									style="width: 24px; height: 24px">
							</i> Profile
							</a> <a class="dropdown-item" href="javascript:void(0)"> <i
								class="dropdown-icon fe fe-help-circle"> <img
									th:src="@{/Images/icons8-help-24.png}" alt="">
							</i> Need help?
							</a> <a class="dropdown-item" data-toggle="modal" href="#end_session"><i
								class="nav-icon"> <img
									th:src="@{/Images/icons8-logout-48.png}" alt="" srcset=""
									style="width: 30px; height: 30px">
							</i> Log out</a>
						</div>
					</div>
				</li>

			</ul>
		</nav>
		<!-- /.navbar -->

		<!-- Main Sidebar Container -->
		<aside class="main-sidebar sidebar-dark-primary elevation-4"
			style="background-color: #124491;">
			<!-- Brand Logo -->
			<a th:href="@{/home}" class="brand-link"> <!-- <img src="../public/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8"> -->
				<h5 class="brand-text font-weight-normal text-yellow">Library
					Management App</h5>
			</a>

			<!-- Sidebar -->
			<div class="sidebar">
				<!-- Sidebar user panel (optional) -->


				<!-- Sidebar Menu -->
				<nav class="mt-2">
					<ul class="nav nav-pills nav-sidebar flex-column"
						data-widget="treeview" role="menu" data-accordion="false"
						style="height: 85vh; display: grid; grid-template-columns: auto; justify-content: space-between;">
						<!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
						<li class="nav-item has-treeview menu-open"><a
							th:href="@{/home}" class="nav-link"> <i
								class="nav-icon"> <img
									th:src="@{/Images/icons8_Library_26px_1.png}" alt="" srcset="">
							</i>
								<p>Dashboard</p>
						</a></li>
						<li class="nav-item"><a th:href="@{/books}"
							class="nav-link"> <i class="nav-icon"> <img
									th:src="@{/Images/icons8_Book_26px.png}" alt="" srcset="">
							</i>
								<p>Manage Books</p>
						</a></li>
						<li class="nav-item has-treeview"><a th:href="@{/students}"
							class="nav-link"> <!-- <i class="far fa-user-graduate"></i> -->
								<i class="nav-icon"> <img
									th:src="@{/Images/icons8_Read_Online_26px.png}" alt=""
									srcset="">
							</i>
								<p>Manage Students</p>
						</a></li>
						<li class="nav-item has-treeview"><a th:href="@{/issueBookForm}"
							class="nav-link"> <!-- <i class="far fa-user-graduate"></i> -->
								<i class="nav-icon"> <img
									th:src="@{/Images/icons8_Sell_26px.png}" alt="" srcset="">
							</i>
								<p>Issue Book</p>
						</a></li>
						<li class="nav-item has-treeview"><a
							th:href="@{/issuedBooks}" class="nav-link"> <!-- <i class="far fa-user-graduate"></i> -->
								<i class="nav-icon"> <img
									th:src="@{/Images/icons8_Return_Purchase_26px.png}" alt=""
									srcset="">
							</i>
								<p>Return Book</p>
						</a></li>
						<li class="nav-item has-treeview"><a
							href="../views/all-records.php" class="nav-link"> <!-- <i class="far fa-user-graduate"></i> -->
								<i class="nav-icon"> <img
									th:src="@{/Images/icons8_View_Details_26px.png}" alt=""
									srcset="">
							</i>
								<p>view Records</p>
						</a></li>
						<li class="nav-item has-treeview"><a
							href="../views/issued-books.php" class="nav-link"> <!-- <i class="far fa-user-graduate"></i> -->
								<i class="nav-icon"> <img
									th:src="@{/Images/icons8_Books_26px.png}" alt="" srcset="">
							</i>
								<p>View Issued Books</p>
						</a></li>
						<li class="nav-item has-treeview"><a
							href="../views/defaulters.php" class="nav-link"> <i
								class="nav-icon"> <img
									th:src="@{/Images/icons8_Conference_26px.png}" alt="" srcset="">
							</i>
								<p>Defaulter List</p>
						</a></li>

					</ul>
				</nav>
				<!-- /.sidebar-menu -->
			</div>
			<!-- /.sidebar -->
		</aside>
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<!-- <h1 class="m-0 text-dark">Dashboard</h1> -->
						</div>
						<!-- /.col -->
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<!-- <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item active">Dashboard v1</li> -->
							</ol>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /.content-header -->

			<!-- Main content -->
			<section class="content">
				<div class="container-fluid" >
					<!-- Small boxes (Stat box) -->
<div th:if="${param.success}" id="myDiv" class="bg-success fade-in-element" style="color:white;padding:10px;width:50%;margin:auto">
					<p>book added successfully</p>
				</div>
				<div th:if="${param.success}" id="myDiv" class="bg-success fade-in-element" style="color:white;padding:10px;width:50%;margin:auto">
					<p>book updated successfully</p>
				</div>
					<h5 class="text-primary"
						style="margin-bottom: -45px; text-align: center">Manage Books</h5>
					<div class="row " style="margin-top: 50px;border-top:4px solid aqua">
						<!-- <h5 style="color:#124491;text-align: center;margin: auto;">Books Details</h5> -->
						<div class="container-fluid">
							<div class="card">
								<div class="card-header row" style="width: 100%;">
									<button type="button" class="btn btn-success"
										data-toggle="modal" data-target="#add-book">Register
										a new Book</button>

									<div class="row" style="margin-left: auto">
										<form class="row" th:action="@{/books}" method="GET">
											<div class="col-auto">

												<select class="input-group-append"
													aria-lebel=".form-select-sm example" name="sortBy">

													<option selected>Sort By Names</option>

													<option value="fullname"
														th:selected="${sortBy == 'title'}">Book Name</option>
													<option value="email" th:selected="${sortBy == 'category'}">Category</option>

												</select>

											</div>


											<div class="col-auto">
												<button class="btn btn-secondary btn-sm" type="submit">Apply</button>
											</div>
										</form>
									</div>


									<div class="modal fade" id="add-book">
										<div class="modal-dialog modal-xl modal-dialog-scrollable">
											<div class="modal-content">
												<div class="modal-header">
													<h4 class="modal-title"></h4>
													<button type="button" class="close" data-dismiss="modal"
														aria-label="Close">
														<span aria-hidden="true">&times;</span>
													</button>
												</div>
												<div class="modal-body">
													<div class="card">
														<h4 class="text-primary" style="text-align: center;">Add
															a New Book</h4>
														<div class="card-body">

															<form class="form-sample" method="post"
																th:action="@{/add-book}" role="form"
																th:object="${books}">
																<fieldset style="border: 1px solid aqua; padding: 20px;">
																	<legend>Book Info</legend>
																	<!-- <p class="card-description" style="font-weight: bold;margin-left: 3%;margin-bottom: 10px;"> Personal info </p> -->
																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookTitle"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Book Tttle</label>
																				<div class="col-sm-9">
																					<input th:field="*{title}" type="text"
																						class="form-control" id="bookTitle"
																						name="book_title" required
																						placeholder="Book Title" />
																				</div>
																			</div>
																		</div>
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookAuthors"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Authors</label>
																				<div class="col-sm-9">
																					<input th:field="*{authors}" type="text"
																						class="form-control" id="bookAuthors"
																						name="book_authors" required
																						placeholder="Book Authors">


																				</div>
																			</div>
																		</div>

																	</div>
																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookISBN" class="col-sm-3 col-form-label"
																					style="font-weight: normal;">ISBN</label>
																				<div class="col-sm-9">
																					<input th:field="*{isbn}" type="text"
																						class="form-control" id="bookISBN"
																						name="book_isbn" required placeholder="Book ISBN">
																				</div>
																			</div>
																		</div>
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookPublisher"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Publisher</label>
																				<div class="col-sm-9">
																					<input th:field="*{publisher}" type="text"
																						class="form-control" placeholder="publisher"
																						id="bookPublisher" name="book_publisher" required />
																				</div>
																			</div>
																		</div>
																	</div>
																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookPublicationDate"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Publication
																					Date</label>
																				<div class="col-sm-9">
																					<input th:field="*{publication_date}" type="date"
																						class="form-control input-lg"
																						id="bookPublicationDate"
																						name="book_publication_date"
																						placeholder="publication date" required>
																				</div>
																			</div>
																		</div>
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookEdition"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Edition</label>
																				<div class="col-sm-9">
																					<input th:field="*{edition}" type="text"
																						class="form-control" id="bookEdition"
																						name="book_edition" placeholder="book edition"
																						required>
																				</div>
																			</div>
																		</div>
																	</div>
																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookLanguage"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Language</label>
																				<div class="col-sm-9">
																					<input th:field="*{language}" type="text"
																						class="form-control" id="bookLanguage"
																						name="book_language" required
																						placeholder="book language  eg. English, German...">
																				</div>
																			</div>
																		</div>
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookCategory"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Category</label>
																				<div class="col-sm-9">
																					<select th:field="*{category}" class="form-control"
																						id="bookCategory" name="book_category" required>
																						<option value="computing">Computing</option>
																						<option value="business">Business</option>
																						<option value="medicine">Medicine</option>
																						<option value="economics">Economics</option>
																					</select>
																				</div>
																			</div>
																		</div>

																	</div>
																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group row">
																				<label id="bookPublicationDate"
																					class="col-sm-3 col-form-label"
																					style="font-weight: normal;">Quantity</label>
																				<div class="col-sm-9">
																					<input th:field="*{quantity}" type="number"
																						class="form-control input-lg"
																						id="bookPublicationDate"
																						name="book_publication_date"
																						placeholder="publication date" required>
																				</div>
																			</div>
																		</div>
																		<div class="col-md-6"></div>
																	</div>
														</div>
														</fieldset>
														<div class="modal-footer justify-content-between">
															<button type="button" class="btn btn-danger"
																data-dismiss="modal">Close</button>
															<button type="submit" class="btn btn-success">Submit</button>
														</div>
														</form>
													</div>
												</div>
											</div>

										</div>
										<!-- /.modal-content -->
									</div>



									<div class="card-tools"></div>
								</div>
								<!-- /.card-header -->
								<div class="card-body table-responsive p-0">

									<table
										class="table table-hover table-sm text-nowrap table-head-fixed table-bordered">




										<thead class="thead -light">
											<tr>
												
												<th>Book Title</th>
												<th>Authors</th>
												<th>ISBN</th>
												<th>Publisher</th>
												<th>Publication Date</th>
												<th>Edition</th>
												<th>Language</th>
												<th>Category</th>
												<th>Quantity</th>
												<th>Stock</th>
												<th colspan="2">Action</th>
											</tr>
										</thead>
										<tbody>
											<tr th:each="book: ${bookPage}">
												<td th:text="${book.title}"></td>
												<td th:text="${book.authors}"></td>
												<td th:text="${book.isbn}"></td>
												<td th:text="${book.publisher}"></td>
												<td th:text="${book.publication_date}"></td>
												<td th:text="${book.edition}"></td>
												<td th:text="${book.language}"></td>
												<td th:text="${book.category}"></td>
												<td th:text="${book.quantity}"></td>
												<td th:text="${book.status}"></td>
												<td><a th:href="@{/editBook/{id}(id = ${book.id})}" class="btn btn-warning">
														Edit</a></td>
												<td><a  th:href="@{/deleteBook/{id}(id = ${book.id})}" class='btn btn-danger '>
														Delete</a></td>
											</tr>

										</tbody>
									</table>
									<ul class="pagination">
										<li class="page-item" th:if="${bookPage.hasPrevious()}">
											<a class="page-link"
											th:href="@{|/books?pageNo=${bookPage.getNumber() - 1}&pageSize=${bookPage.getSize()}&sortBy=${sortBy}|}">Previous</a>
										</li>

										<span
											th:each="i : ${#numbers.sequence(0, bookPage.getTotalPages() - 1)}">
											<li class="page-item" th:if="${i != bookPage.getNumber()}">
												<a class="page-link"
												th:href="@{|/books?pageNo=${i}&pageSize=${bookPage.getSize()}&sortBy=${sortBy}|}"
												th:text="${i + 1}"></a>
										</li>

											<li class="page-item active"
											th:if="${i == bookPage.getNumber()}"><a
												class="page-link "
												th:href="@{|/books?pageNo=${i}&pageSize=${bookPage.getSize()}&sortBy=${sortBy}|}"
												th:text="${i + 1}"></a></li>

										</span>

										<li class="page-item" th:if="${bookPage.hasNext()}"><a
											class="page-link"
											th:href="@{|/books?pageNo=${bookPage.getNumber() + 1}&pageSize=${bookPage.getSize()}&sortBy=${sortBy}|}">Next</a>
										</li>
									</ul>

								</div>

								<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</section>
			<!-- /.content -->


		</div>



		<!-- Main Footer -->
		<footer class="main-footer"
			style="background-color: #fff; margin: auto;">
			<!-- To the right -->
			<div class="float-right d-none d-sm-inline">Â©Library Management
				System</div>
			<!-- Default to the left -->
			<div class="float-left">
				<strong>Copyright &copy;2024 <a href="#">DigitalVortex</a>.
				</strong> All rights reserved.
			</div>
		</footer>

		<script th:src="@{/plugins/jquery/jquery.min.js}"></script>
		<script th:src="@{/js/ajax.js}"></script>
		<!-- Bootstrap 4 -->

		<script th:src="@{/js/pages/profile.initcopy.js}
"></script>

		<script th:src="@{/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
		<!-- AdminLTE App -->
		<script th:src="@{/js/adminlte.min.js}"></script>
		<!-- SweetAlert2 -->
		<script th:src="@{/plugins/sweetalert2/sweetalert2.min.js}"></script>
		<!-- Moment Js -->
		<script th:src="@{/plugins/moment/moment.min.js}"></script>
		<!-- Toastr -->
		<script th:src="@{/plugins/toastr/toastr.min.js}"></script>
		<!-- Select2 -->
		<script th:src="@{/plugins/select2/js/select2.full.min.js}"></script>
		<!-- date-range-picker -->
		<script th:src="@{/plugins/daterangepicker/daterangepicker.js}"></script>

		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.js" integrity="sha384-YwCdhNQ2IwiYajqT/nGCj0FiU5SR4oIkzYP3ffzNWtu39GKBddP0M0waDU7Zwco0" crossorigin="anonymous"></script> -->
		<!-- DataTables  & Plugins -->
		<script th:src="@{/plugins/datatables/jquery.dataTables.min.js}"></script>
		<script
			th:src="@{/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
		<script
			th:src="@{/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
		<script
			th:src="@{/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>
		<script
			th:src="@{/plugins/datatables-buttons/js/dataTables.buttons.min.js}"></script>
		<script
			th:src="@{/plugins/datatables-buttons/js/buttons.bootstrap4.min.js}"></script>
		<script th:src="@{/plugins/jszip/jszip.min.js}"></script>
		<script th:src="@{/plugins/pdfmake/pdfmake.min.js}"></script>
		<script th:src="@{/plugins/pdfmake/vfs_fonts.js}"></script>
		<script
			th:src="@{/plugins/datatables-buttons/js/buttons.html5.min.js}"></script>
		<script
			th:src="@{/plugins/datatables-buttons/js/buttons.print.min.js}"></script>
		<!-- ChartJS -->
		<script th:src="@{/plugins/chart.js/Chart.min.js}"></script>
		<!-- Custom JS -->
		<script th:src="@{/js/custom.js}"></script>


		<!-- Select  -->
		<script th:src="@{/js/bootstrap.wizard.min.js}"></script>
		<script th:src="@{/js/pages/form-wizard.init copy.js}"></script>
<script>
var myDiv = document.getElementById('myDiv');

setTimeout(function(){
			myDiv.style.display = 'none';
		},4000);
</script>
		<script>
			$(document)
					.ready(
							function() {
								// Handle edit button click
								$('.sedit-btn')
										.on(
												'click',
												function() {
													var bookId = $(this).data(
															'id');

													// AJAX request to fetch book details
													$
															.ajax({
																url : '../helpers/get-book-details.php',
																type : 'GET',
																data : {
																	book_id : bookId
																},
																dataType : 'json',
																success : function(
																		data) {
																	// Populate the modal fields with data
																	$(
																			'#edit-id')
																			.val(
																					data.book_id);
																	$(
																			'#edit-regno')
																			.val(
																					data.book_regno);
																	$(
																			'#edit-fullname')
																			.val(
																					data.book_fullname);
																	$(
																			'#edit-email')
																			.val(
																					data.book_email);
																	$(
																			'#edit-national-id')
																			.val(
																					data.book_national_id);
																	$(
																			'#edit-phone')
																			.val(
																					data.book_phone);
																	$(
																			'#edit-date-of-birth')
																			.val(
																					data.book_date_of_birth);
																	$(
																			'#edit-gender')
																			.val(
																					data.book_gender);
																	$(
																			'#edit-school-id')
																			.val(
																					data.book_school_id);
																	$(
																			'#edit-class')
																			.val(
																					data.book_class);
																	$(
																			'#edit-department')
																			.val(
																					data.book_department);
																	$(
																			'#edit-course')
																			.val(
																					data.book_course);

																	// Show the modal
																	$(
																			'#edit-book')
																			.modal(
																					'show');
																}
															});
												});

								// Handle form submission for updating the book

							});
		</script>
	</div>



</body>

</html>













